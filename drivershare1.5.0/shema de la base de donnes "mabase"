CREATE TABLE users(
    nom_prenom VARCHAR(50) ,
    email_user VARCHAR(50) PRIMARY KEY,
    numero_telephone VARCHAR(15),
    mot_de_passe VARCHAR(50),
    matricule BIGINT,
    notion FLOAT CHECK (notion >= 0 AND notion <= 5), -- Colonne pour la notion (réels entre 0 et 5)
    code_promo BOOLEAN -- Colonne pour le code promo (booléen)
);

CREATE TABLE chauffeur (
    nom VARCHAR(50),                   -- Colonne pour le nom
    prenom VARCHAR(50),                -- Colonne pour le prénom
    adresse VARCHAR(50) ,             -- Colonne pour l'adresse
    numero_telephone VARCHAR(15),      -- Colonne pour le numéro de téléphone
    email VARCHAR(50) PRIMARY KEY,         -- Colonne pour l'adresse e-mail (ajout de l'option UNIQUE pour assurer l'unicité)
    nom_voiture VARCHAR(50),          -- Colonne pour le nom de la voiture
    matricule_voiture BIGINT,          -- Colonne pour le matricule de la voiture (entier)
    numero_assurance_nationale VARCHAR(20), -- Colonne pour le numéro d'assurance nationale
    notion FLOAT CHECK (notion >= 0 AND notion <= 5), -- Colonne pour la notion (réels entre 0 et 5)
    numero_carte_nationale BIGINT      -- Colonne pour le numéro de carte nationale (entier de 14 chiffres)
);


CREATE TABLE course (
    id INT PRIMARY KEY,                -- Clé primaire de la table "course"
    email_user  VARCHAR(50),                       -- Clé étrangère vers la table "user"
    email  VARCHAR(50),                  -- Clé étrangère vers la table "chauffeur"
    id_course INT,                     -- Identifiant de la course
    duree TIME,                       -- Temps de la course (au format TIME)
    depart VARCHAR(50),               -- Lieu de départ
    arrivee VARCHAR(50),              -- Lieu d'arrivée
    prix DECIMAL(10, 2),               -- Prix de la course (utilisation de DECIMAL pour les valeurs monétaires)
    distance DECIMAL(10, 2),           -- Distance de la course
    FOREIGN KEY (email) REFERENCES users(email),          -- Clé étrangère vers la table "users"
    FOREIGN KEY (email) REFERENCES chauffeur(email)  -- Clé étrangère vers la table "chauffeur"
);

CREATE TABLE rols (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(50) UNIQUE,
    mot_de_passe VARCHAR(50),
    role VARCHAR(20)
);

INSERT INTO rols (email, mot_de_passe, role) VALUES ('admin@gmail.com', 'admin', 'admin');

INSERT INTO `chauffeur` ( `nom`, `prenom`, `adresse`, `numero_telephone`, `email`, `nom_voiture`, `matricule_voiture`, 
                                               `numero_assurance_nationale`, `notion`, `numero_carte_nationale`) 
                                               VALUES ( 'abdo', 'abdo', 'alger', '0555555555', 'abdo@gmail.com', 'rs3', '00001124116', '1', '5', '1');

INSERT INTO `users` (`nom_prenom`, `email_user`, `numero_telephone`, `mot_de_passe`, `matricule`, `notion`, `code_promo`)
                       VALUES ('user', 'user@gmail.com', '0555555555', 'user1', '202032060608', '5', '1');
