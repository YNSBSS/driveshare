<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>confirme trajet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="accueilcompteuser.css">
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
<style>
  body{
    background-color:green ;
  }
  button{
    background-color:wheat;
    color: green;
  }
  div{
    display: inline-block;
  justify-content: center; 
  align-items: center;
  align-content: center;
  }
</style>
</head>
<body>
  
    <script>
        // Function to retrieve URL parameters
        function getUrlParams() {
          var params = {};
          var queryString = window.location.search.substring(1);
          var pairs = queryString.split('&');
          for (var i = 0; i < pairs.length; i++) {
            var pair = pairs[i].split('=');
            params[pair[0]] = decodeURIComponent(pair[1]);
          }
          return params;
        }
    
        // Get URL parameters
        var params = getUrlParams();
        var distance = params.distance;
        var depart = params.depart;
        var arrive = params.arrive;
    
        // Display parameters
        document.write('<div class="group"><h1>Voullez vous confirmez ?</h1>');
        document.write('<p>from : <strong>' +  depart + '</strong> to <br> <strong>'+ arrive+'</strong></p>');
        document.write('<p>whith total price: ' + calculatePrice(distance) + 'DA .</p>');
        document.write('<button type="button" id="btnconfirmer" onclick="confirmerphp()">confirmer</button>   ');
        document.write('<button type="button" id="btnannuler" onclick="window.history.back();">annuler</button><br></div>');




        function calculatePrice(distance){
            if(distance<3000){return 250;}
            else{return (distance/1000)*40;}
        }
        function confirmerphp(){
          var currentDate = new Date();
         currentDate = currentDate.toLocaleString(); // Localized date and time (e.g., "2/28/2024, 12:00:00 PM")
         var price=calculatePrice(distance);
         //sendDataToServer(depart, arrive, price,distance, currentDate);

        }
        /*function sendDataToServer(depart, arrive, price,distance, date) {
  $.ajax({
    url: 'confirmertrajet.php', // Replace with the URL of your PHP script
    method: 'POST',
    data: {
      depart: depart,
      arrive: arrive,
      price: price,
      distance:distance,
      date: date
    },
    success: function(response) {
      console.log('Data sent successfully:', response);
      // Handle any further processing or UI updates here
    },
    error: function(xhr, status, error) {
      console.error('Error sending data:', error);
      // Handle error cases here
    }
  });
}*/

      </script>
</body>
</html>